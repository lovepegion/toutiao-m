(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59d5d902"],{"06c5":function(t,n,e){"use strict";e.d(n,"a",(function(){return o}));e("fb6a"),e("d3b7"),e("a630"),e("3ca3");var r=e("6b75");function o(t,n){if(t){if("string"===typeof t)return Object(r["a"])(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Object(r["a"])(t,n):void 0}}},2909:function(t,n,e){"use strict";e.d(n,"a",(function(){return s}));var r=e("6b75");function o(t){if(Array.isArray(t))return Object(r["a"])(t)}e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0"),e("a630");function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var c=e("06c5");function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return o(t)||a(t)||Object(c["a"])(t)||i()}},"2bea":function(t,n,e){"use strict";e("503d")},"4df4":function(t,n,e){"use strict";var r=e("0366"),o=e("7b0b"),a=e("9bdd"),c=e("e95a"),i=e("50c4"),s=e("8418"),u=e("9a1f"),l=e("35a1");t.exports=function(t){var n,e,f,d,m,h,p=o(t),v="function"==typeof this?this:Array,b=arguments.length,g=b>1?arguments[1]:void 0,y=void 0!==g,w=l(p),j=0;if(y&&(g=r(g,b>2?arguments[2]:void 0,2)),void 0==w||v==Array&&c(w))for(n=i(p.length),e=new v(n);n>j;j++)h=y?g(p[j],j):p[j],s(e,j,h);else for(d=u(p,w),m=d.next,e=new v;!(f=m.call(d)).done;j++)h=y?a(d,g,[f.value,j],!0):f.value,s(e,j,h);return e.length=j,e}},"503d":function(t,n,e){},5923:function(t,n,e){"use strict";e.d(n,"c",(function(){return o})),e.d(n,"b",(function(){return a})),e.d(n,"a",(function(){return c}));e("a15b"),e("99af");var r=e("b775"),o=function(t){return Object(r["a"])({method:"GET",url:"/song/url?id=".concat(t)})},a=function(t){var n=t.join(",");return Object(r["a"])({method:"GET",url:"/song/detail?ids=".concat(n)})},c=function(t){return Object(r["a"])({method:"GET",url:"/comment/music?id=".concat(t.id,"&limit=").concat(t.limit,"&offset=").concat(t.offset)})}},"6b75":function(t,n,e){"use strict";function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}e.d(n,"a",(function(){return r}))},"9b06":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":""},on:{"click-left":function(n){return t.$router.back()},"click-right":t.onShare}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("评论("+t._s(t.commentCount)+")")]),e("van-icon",{attrs:{slot:"right",name:"share-o",size:"0.5rem"},slot:"right"})],1),e("div",{staticClass:"fix_wrap"},[e("div",{staticClass:"t1_wrap"},[e("van-image",{attrs:{width:"1rem",height:"1rem",fit:"cover",round:"",src:t.coverUrl}}),e("span",[t._v(t._s(t.songName))]),t._v("- "),e("span",[t._v(t._s(t.singerName))])],1),e("div",{staticClass:"t2_title"},[t._v("评论区")]),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(n){t.loading=n},expression:"loading"}},t._l(t.list,(function(t,n){return e("CommentListItem",{key:n,attrs:{userCover:t.user.avatarUrl,userName:t.user.nickname,likedCount:t.likedCount,commentTime:t.time,content:t.content}})})),1),e("div",{staticClass:"t4_wrap"},[e("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请输入评论"},model:{value:t.message,callback:function(n){t.message=n},expression:"message"}},[e("button",{attrs:{slot:"right-icon"},on:{click:t.onComment},slot:"right-icon"},[t._v("发送评论")])])],1)],1)],1)},o=[],a=e("2909"),c=e("1da1"),i=(e("96cf"),e("5923")),s=e("c24f"),u=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("van-cell",[e("van-image",{attrs:{slot:"icon",width:"1.2rem",height:"1.2rem",fit:"cover",round:"",src:t.userCover},slot:"icon"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.userName))]),e("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t._f("formatTime")(t.commentTime)))]),e("div",{attrs:{slot:"default"},slot:"default"},[e("span",[t._v(t._s(t.likedCount))]),e("van-icon",{attrs:{"class-prefix":"toutiao",name:"dianzan",size:"0.5rem"}})],1)],1),e("div",{staticClass:"t1_content"},[t._v(t._s(t.content))])],1)},l=[],f=e("5a0c"),d=e.n(f),m={name:"CommentListItem",props:["userCover","userName","likedCount","commentTime","content"],filters:{formatTime:function(t){return d()(t).format("YYYY年MM月DD日")}}},h=m,p=(e("2bea"),e("2877")),v=Object(p["a"])(h,u,l,!1,null,"5d861d4c",null),b=v.exports,g={name:"Comment",components:{CommentListItem:b},props:["type","id"],data:function(){return{list:[],commentCount:0,coverUrl:"",songName:"",singerName:"",loading:!1,finished:!1,offset:0,message:""}},methods:{onSongInfo:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var e,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(i["b"])([t.id]);case 2:e=n.sent,r=e.data,t.coverUrl=r.songs[0].al.picUrl,t.songName=r.songs[0].name,t.singerName=r.songs[0].ar[0].name;case 7:case"end":return n.stop()}}),n)})))()},onLoad:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var e,r,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(i["a"])({id:t.id,limit:20,offset:t.offset});case 2:o=n.sent,c=o.data,console.log("comment",c),t.commentCount=c.total,c.hotComments&&(e=t.list).unshift.apply(e,Object(a["a"])(c.hotComments)),(r=t.list).push.apply(r,Object(a["a"])(c.comments)),t.loading=!1,c.comments.length>=20?t.offset+=20:t.finished=!0;case 10:case"end":return n.stop()}}),n)})))()},onComment:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var e,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["h"])({t:1,type:0,id:t.id,content:t.message});case 2:e=n.sent,r=e.data,console.log("putcomment",r);case 5:case"end":return n.stop()}}),n)})))()},onShare:function(){}},mounted:function(){this.onSongInfo()}},y=g,w=(e("b6d6"),Object(p["a"])(y,r,o,!1,null,"30c16c08",null));n["default"]=w.exports},"9bdd":function(t,n,e){var r=e("825a"),o=e("2a62");t.exports=function(t,n,e,a){try{return a?n(r(e)[0],e[1]):n(e)}catch(c){o(t,"throw",c)}}},a15b:function(t,n,e){"use strict";var r=e("23e7"),o=e("44ad"),a=e("fc6a"),c=e("a640"),i=[].join,s=o!=Object,u=c("join",",");r({target:"Array",proto:!0,forced:s||!u},{join:function(t){return i.call(a(this),void 0===t?",":t)}})},a630:function(t,n,e){var r=e("23e7"),o=e("4df4"),a=e("1c7e"),c=!a((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:c},{from:o})},b657:function(t,n,e){},b6d6:function(t,n,e){"use strict";e("b657")},c24f:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return c})),e.d(n,"i",(function(){return i})),e.d(n,"g",(function(){return s})),e.d(n,"d",(function(){return u})),e.d(n,"f",(function(){return l})),e.d(n,"h",(function(){return f}));e("99af");var r=e("b775"),o=function(t){return Object(r["a"])({method:"GET",url:"/cellphone/existence/check?phone=".concat(t)})},a=function(t){return Object(r["a"])({method:"GET",url:"/captcha/sent?phone=".concat(t)})},c=function(t){return Object(r["a"])({method:"GET",url:"/captcha/verify?phone=".concat(t.phone,"&captcha=").concat(t.captcha)})},i=function(t){return Object(r["a"])({method:"GET",url:"/register/cellphone?phone=".concat(t.phone,"&password=").concat(t.password,"&captcha=").concat(t.captcha,"&nickname=").concat(t.nickname)})},s=function(t){return Object(r["a"])({method:"GET",url:"/login/cellphone?phone=".concat(t.phone,"&password=").concat(t.password)})},u=function(t){return Object(r["a"])({method:"GET",url:"/user/detail?uid=".concat(t)})},l=function(t){return Object(r["a"])({method:"GET",url:"/user/follows?uid=".concat(t)})},f=function(t){return Object(r["a"])({method:"GET",url:"/comment?t=".concat(t.t,"&type=").concat(t.type,"&id=").concat(t.id,"&content=").concat(t.content)})}},fb6a:function(t,n,e){"use strict";var r=e("23e7"),o=e("861d"),a=e("e8b5"),c=e("23cb"),i=e("50c4"),s=e("fc6a"),u=e("8418"),l=e("b622"),f=e("1dde"),d=f("slice"),m=l("species"),h=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(t,n){var e,r,l,f=s(this),d=i(f.length),v=c(t,d),b=c(void 0===n?d:n,d);if(a(f)&&(e=f.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)?o(e)&&(e=e[m],null===e&&(e=void 0)):e=void 0,e===Array||void 0===e))return h.call(f,v,b);for(r=new(void 0===e?Array:e)(p(b-v,0)),l=0;v<b;v++,l++)v in f&&u(r,l,f[v]);return r.length=l,r}})}}]);
//# sourceMappingURL=chunk-59d5d902.da50727a.js.map