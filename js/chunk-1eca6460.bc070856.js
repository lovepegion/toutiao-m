(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1eca6460"],{"0f9e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("van-nav-bar",{staticClass:"app-nav-bar",attrs:{title:"手机注册","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),n("van-form",{ref:"login-form",attrs:{"show-error":!1,"show-error-message":!1,"validate-first":""},on:{submit:e.onCaptcha,failed:e.onFailed}},[n("van-field",{attrs:{name:"phone","icon-prefix":"toutiao","left-icon":"shouji",placeholder:"请输入手机号",rules:e.formRules.phone},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}),n("van-field",{attrs:{name:"password",type:"password",maxlength:"18","left-icon":"bag-o",placeholder:"请输入6-18位密码",rules:e.formRules.password},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),n("van-field",{attrs:{name:"passwordConfirm",type:"password",maxlength:"18","left-icon":"gem-o",placeholder:"请再次输入密码"},model:{value:e.passwordConfirm,callback:function(t){e.passwordConfirm=t},expression:"passwordConfirm"}}),n("div",{staticClass:"login-btn-wraper"},[n("van-button",{staticClass:"login-btn",attrs:{type:"info",block:""}},[e._v("发送验证码")])],1)],1)],1)},a=[],o=n("1da1"),s=(n("96cf"),n("c24f")),c={name:"Register",data:function(){return{user:{phone:"",password:""},passwordConfirm:"",formRules:{password:[{required:!0,message:"请输入密码"},{pattern:/^[\da-zA-Z~!@#$%^&*]{6,18}/,message:"密码格式错误"}],phone:[{required:!0,message:"请输入手机号"},{pattern:/^1[3|5|7|8|9]\d{9}$/,message:"手机号格式错误"}]}}},methods:{onCaptcha:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user.password!==e.passwordConfirm){t.next=28;break}return t.prev=1,t.next=4,Object(s["b"])(e.user.phone);case 4:if(n=t.sent,r=n.data,!(r.exist>0)){t.next=9;break}return e.$toast.fail("该手机号已被注册"),t.abrupt("return");case 9:e.$store.state.user.phone=e.user.phone,e.$store.state.user.password=e.user.password,t.next=17;break;case 13:return t.prev=13,t.t0=t["catch"](1),e.$toast.fail("注册失败，稍后再试"),t.abrupt("return");case 17:return t.prev=17,t.next=20,Object(s["c"])(e.user.phone);case 20:e.$router.push("/captcha"),t.next=26;break;case 23:t.prev=23,t.t1=t["catch"](17),e.$toast.fail("发送验证码失败，请稍后再试",t.t1);case 26:t.next=29;break;case 28:e.$toast.fail("两次输入的密码不一致");case 29:case"end":return t.stop()}}),t,null,[[1,13],[17,23]])})))()},onFailed:function(e){console.log(e),e.errors[0]&&this.$toast({message:e.errors[0].message,position:"top"})}}},u=c,i=(n("2eac"),n("2877")),p=Object(i["a"])(u,r,a,!1,null,"45454416",null);t["default"]=p.exports},"2eac":function(e,t,n){"use strict";n("326e")},"326e":function(e,t,n){},c24f:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"i",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return p})),n.d(t,"h",(function(){return l}));n("99af");var r=n("b775"),a=function(e){return Object(r["a"])({method:"GET",url:"/cellphone/existence/check?phone=".concat(e)})},o=function(e){return Object(r["a"])({method:"GET",url:"/captcha/sent?phone=".concat(e)})},s=function(e){return Object(r["a"])({method:"GET",url:"/captcha/verify?phone=".concat(e.phone,"&captcha=").concat(e.captcha)})},c=function(e){return Object(r["a"])({method:"GET",url:"/register/cellphone?phone=".concat(e.phone,"&password=").concat(e.password,"&captcha=").concat(e.captcha,"&nickname=").concat(e.nickname)})},u=function(e){return Object(r["a"])({method:"GET",url:"/login/cellphone?phone=".concat(e.phone,"&password=").concat(e.password)})},i=function(e){return Object(r["a"])({method:"GET",url:"/user/detail?uid=".concat(e)})},p=function(e){return Object(r["a"])({method:"GET",url:"/user/follows?uid=".concat(e)})},l=function(e){return Object(r["a"])({method:"GET",url:"/comment?t=".concat(e.t,"&type=").concat(e.type,"&id=").concat(e.id,"&content=").concat(e.content)})}}}]);
//# sourceMappingURL=chunk-1eca6460.bc070856.js.map